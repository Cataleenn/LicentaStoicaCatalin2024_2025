<div class="blue-background">

  <div class="survey-create-container">
    <h2>Creare Chestionar</h2>

    <form [formGroup]="surveyForm" (ngSubmit)="onSubmit()">

      <div class="input-group">
  <label for="formTitle">Titlu Chestionar</label>
  <input id="formTitle"
         formControlName="formTitle"
         [ngClass]="{ 'input-error': surveyForm.get('formTitle')?.invalid && surveyForm.get('formTitle')?.touched }"
         required />

  <div class="text-danger"
       *ngIf="surveyForm.get('formTitle')?.invalid && surveyForm.get('formTitle')?.touched">
    Titlul chestionarului este obligatoriu.
  </div>
</div>


      <div class="input-group">
        <label for="adminDescription">Descriere pentru Administrator</label>
        <textarea id="adminDescription" formControlName="adminDescription"></textarea>
      </div>

      <div class="input-group">
        <label for="userInstructions">InstrucÈ›iuni pentru Utilizator</label>
        <textarea id="userInstructions" formControlName="userInstructions"></textarea>
      </div>

      <div formArrayName="questions">
  <div *ngFor="let question of questions.controls; let i = index"
       [formGroupName]="i"
       class="question-block"
       [ngClass]="{ 'has-error': question.errors?.['noOptions'] }">

    <!-- Checkbox pentru Ã®ntrebare obligatorie -->
    <label>
      <input type="checkbox" formControlName="required" />
      Ãntrebare obligatorie
    </label>

    <!-- Textul Ã®ntrebÄƒrii -->
    <div class="input-group">
  <label>Ãntrebare {{ i + 1 }}</label>
 <input formControlName="questionText"
       type="text"
       [ngClass]="{ 'input-error': question.get('questionText')?.invalid && question.get('questionText')?.touched }"
       required />


  <!-- Mesaj de eroare sub input -->
  <div class="text-danger"
       *ngIf="question.get('questionText')?.invalid && question.get('questionText')?.touched">
    Textul Ã®ntrebÄƒrii este obligatoriu.
  </div>
</div>



    <!-- Select pentru tipul Ã®ntrebÄƒrii -->
    <div class="input-group">
      <label>Tipul Ã®ntrebÄƒrii</label>
      <select formControlName="questionType">
        <option value="single_choice">Alegere unicÄƒ</option>
        <option value="multiple_choice">Alegere multiplÄƒ</option>
        <option value="open_ended">Text liber</option>
      </select>
    </div>

    <!-- Mesaj de eroare dacÄƒ lipsesc opÈ›iunile -->
    <p *ngIf="question.errors?.['noOptions']" class="text-danger">
      Trebuie sÄƒ adaugi cel puÈ›in o opÈ›iune pentru aceastÄƒ Ã®ntrebare.
    </p>

    <!-- Zona de opÈ›iuni -->
    <div *ngIf="question.get('questionType')?.value === 'single_choice' || question.get('questionType')?.value === 'multiple_choice'">
      <div formArrayName="options">
        <div *ngFor="let option of getOptions(i).controls; let j = index"
             [formGroupName]="j"
             class="input-group">
          <label>OpÈ›iune {{ j + 1 }}</label>
          <input formControlName="text" type="text" required placeholder="Textul opÈ›iunii" />
          <button type="button" (click)="removeOption(i, j)">È˜terge opÈ›iune</button>
        </div>
      </div>
      <button type="button" (click)="addOption(i)">â• AdaugÄƒ opÈ›iune</button>
    </div>

    <!-- Buton de È™tergere Ã®ntrebare -->
    <button type="button" (click)="removeQuestion(i)">ğŸ—‘ï¸ È˜terge Ã®ntrebare</button>

  </div>
</div>


      <button type="button" (click)="addQuestion()">â• AdaugÄƒ Ã®ntrebare</button>
      <button type="submit" class="submit-btn">
  âœ… CreeazÄƒ chestionarul
</button>



    </form>
  </div>

</div>