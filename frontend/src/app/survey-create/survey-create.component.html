<div class="blue-background">

  <div class="survey-create-container">
    <h2>Creare Chestionar</h2>

    <form [formGroup]="surveyForm" (ngSubmit)="onSubmit()">

      <div class="input-group">
        <label for="formTitle">Titlu Chestionar</label>
        <input id="formTitle" formControlName="formTitle" required />
      </div>

      <div class="input-group">
        <label for="adminDescription">Descriere pentru Administrator</label>
        <textarea id="adminDescription" formControlName="adminDescription"></textarea>
      </div>

      <div class="input-group">
        <label for="userInstructions">Instrucțiuni pentru Utilizator</label>
        <textarea id="userInstructions" formControlName="userInstructions"></textarea>
      </div>

      <div formArrayName="questions">
        <div *ngFor="let question of questions.controls; let i = index" [formGroupName]="i" class="question-block">

          <div class="input-group">
            <label>Întrebare {{ i + 1 }}</label>
            <input formControlName="questionText" type="text" required />
          </div>

          <div class="input-group">
            <label>Tipul întrebării</label>
            <select formControlName="questionType">
              <option value="single_choice">Alegere unică</option>
              <option value="multiple_choice">Alegere multiplă</option>
              <option value="open_ended">Text liber</option>
            </select>
          </div>

          <div *ngIf="question.get('questionType')?.value === 'single_choice' || question.get('questionType')?.value === 'multiple_choice'">
            <div *ngIf="questionAllowsOptions(question)">
              <div formArrayName="options">
                <div *ngFor="let option of getOptions(i).controls; let j = index" [formGroupName]="j" class="input-group">
                  <label>Opțiune {{ j + 1 }}</label>
                  <input formControlName="text" type="text" required placeholder="Textul opțiunii" />
                  <button type="button" (click)="removeOption(i, j)">Șterge opțiune</button>
                </div>
              </div>
              <button type="button" (click)="addOption(i)">Adaugă opțiune</button>
            </div>
          </div>

          <button type="button" (click)="removeQuestion(i)">Șterge întrebare</button>
        </div>
      </div>

      <button type="button" (click)="addQuestion()">➕ Adaugă întrebare</button>
      <button type="submit" [disabled]="!surveyForm.valid">✅ Creeaza chestionarul</button>

    </form>
  </div>

</div>